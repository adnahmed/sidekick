; main binary

(executable
 (name main)
 (public_name sidekick)
 (package sidekick-bin)
 (libraries containers iter result msat sidekick.core sidekick.base-term
   sidekick.msat-solver sidekick-bin.smtlib)
 (flags :standard -safe-string -color always -open Sidekick_util))

(rule
  (targets sidekick_version.ml)
  (deps (universe))
  (mode promote)
  (action
    (with-stdout-to %{targets}
      (progn 
        (echo "let version = {git|")
        (run git rev-parse HEAD)
        (echo "|git}")))))

(ocamllex (modules Dimacs_lexer))
